<?xml version="1.0" encoding="utf-8" ?>
<Datatable xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xsi:noNamespaceSchemaLocation="../Schemas/EntityActionDefinition.xsd">
  <!-- Vodyani Succ -->
  <EmpireDiplomacyGiveResourcesAction Name="EmpireDiplomaticEssenceAction" PopulationToDestroyCount="1">
    <PathPrerequisite Flags="Prerequisite,Discard">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <InterpreterPrerequisite Flags="Disable">Property(Context,@ClassEmpire,EmpireLifeforceStock) lt Property(Context,@ClassEmpire,MaximumEmpireLifeforceStock)</InterpreterPrerequisite>

    <MinorLuxuryCost Instant="true">15 * Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction)</MinorLuxuryCost>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <RelationPathPrerequisite Inverted="false" Flags="Prerequisite,Discard">ClassMinorRelationWithMajor,RelationIdeologyMinorPacifist</RelationPathPrerequisite>

    <MinorEmpireInterpreterPrerequisite Flags="Prerequisite,RequiredBestRelation">$(OwnershipType) ge 1 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="NoPopulationOnSystem">Property(Context, @'ClassEmpire/ClassColonizedStarSystem,MinorHomeSystem',Population,true) gt 1</MinorEmpireInterpreterPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorEssence</PopulationEventOnSelf>

    <ResourceReward ResourceName="EmpireLifeforce">300</ResourceReward>
  </EmpireDiplomacyGiveResourcesAction>

  <!-- Vodyani Leech -->
  <TransferResourcesFleetAction Name="TransferResourcesInFleetAction" Flags="CancelOnMovement,CancelOnTransfer">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Discard">../ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
      <PathPrerequisite Flags="Discard" Inverted="false">ClassGarrison/ClassShip/ClassSection/ClassModule,ModuleLogistics</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionExpedition</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionColonize</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionReclaimMothership</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionGroundBattle</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="Prerequisite,FleetInvisibleGeneral">InvisibilityFleetAction</PathPrerequisite>
    </EntityPrerequisites>
    <EntityPrerequisites Filter="OtherEmpire" Location="OrbitEntities">
      <InterpreterPrerequisite Flags="Prerequisite,SystemResourcesEmpty">Path(Context, @'ClassColonizedStarSystem,ColonizedStarSystemStateOutpost') or Path(Context, @'ClassColonizedStarSystem,ColonizedStarSystemStateLost') or Property(Context, @'ClassColonizedStarSystem', Population, true) ge 1 </InterpreterPrerequisite>
    </EntityPrerequisites>
    <EntityPrerequisites Location="OrbitEntities">
      <PathPrerequisite Inverted="true" Flags="CannotBeInvaded">CannotBeInvaded</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionLogistics"/>
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionHeroLocked"/>
    </EntityModifiers>
    <CancelActions Flags="CancelOnTransfer" SameContext="false" SameInitiator="true"/>
    <StartEventName>NotificationAbductionStarted</StartEventName>
    <StockEmptyEventName>NotificationAbductionStockEmpty</StockEmptyEventName>
    <FleetPopulationEventName>PopulationPoliticalEventFleetAbducting</FleetPopulationEventName>
    <SystemPopulationEventName>PopulationPoliticalEventPopulationAbducted</SystemPopulationEventName>
  </TransferResourcesFleetAction>

  <!--  Colonize Option A: Nobody is Guarding  -->
  <ColonizeFleetAction Name="ColonizeFleetAction" FeedbackDuration="1.5" DelayAfterFeedback="1">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Inverted="true" Flags="Prerequisite,SystemIsBeingBlockaded,Discard">ClassGarrisonFleet,FleetActionGuarding</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,NeedColonizationModule,Discard">ClassGarrisonFleet/ClassShip/ClassSection/ClassModule,ModuleSupportColonization</PathPrerequisite>
      <InterpreterPrerequisite Flags="Prerequisite,Disable,CannotColonizeUnderEnemyInfluence">not(Path(Context, @'FleetInfluenceStateHostile')) or Path(Context, @'./ClassEmpire/ClassSenate/LawP05L05Effect')</InterpreterPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionColonize"/>
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionHeroLocked"/>
    </EntityModifiers>
    <EntityPrerequisites Location="OrbitEntities">
      <PathPrerequisite Inverted="true" Flags="Prerequisite,Disable,SystemIsBeingBlockaded">GuardedGameNode</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="Prerequisite,Disable,SystemIsBeingBlockaded">BlockadedColonizedStarSystem</PathPrerequisite>
    </EntityPrerequisites>
    <CancelActions Flags="CancelOnAnything,CancelOnGuard" SameContext="true" SameInitiator="false" SameNodeAndOnAllEmpires="true"/>
  </ColonizeFleetAction>

  <!--  Colonize Option B: You are Guarding  -->
  <!--<ColonizeFleetAction Name="ColonizeFleetAction2" FeedbackDuration="1.5" DelayAfterFeedback="1">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="SystemIsBeingBlockaded,Discard" Inverted="true">../ClassEmpire,FactionTraitBlockadeBreakers</PathPrerequisite>
      <PathPrerequisite Flags="SystemIsBeingBlockaded,Discard">ClassGarrisonFleet,FleetActionGuarding</PathPrerequisite>
      <PathPrerequisite Flags="NeedColonizationModule,Discard">ClassGarrisonFleet/ClassShip/ClassSection/ClassModule,ModuleSupportColonization</PathPrerequisite>
      <InterpreterPrerequisite Flags="CannotColonizeUnderEnemyInfluence">not(Path(Context, @'FleetInfluenceStateHostile')) or Path(Context, @'./ClassEmpire/ClassSenate/LawP05L05Effect')</InterpreterPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionColonize"/>
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionHeroLocked"/>
    </EntityModifiers>
    <CancelActions Flags="CancelOnAnything,CancelOnGuard" SameContext="true" SameInitiator="true" SameNodeAndOnAllEmpires="false"/>
  </ColonizeFleetAction>-->

  <!--  Colonize Option C: Blockade Breaker  -->
  <!--<ColonizeFleetAction Name="ColonizeFleetAction3" FeedbackDuration="1.5" DelayAfterFeedback="1">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="SystemIsBeingBlockaded,Discard">../ClassEmpire,FactionTraitBlockadeBreakers</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,NeedColonizationModule,Discard">ClassGarrisonFleet/ClassShip/ClassSection/ClassModule,ModuleSupportColonization</PathPrerequisite>
      <InterpreterPrerequisite Flags="Prerequisite,Disable,CannotColonizeUnderEnemyInfluence">not(Path(Context, @'FleetInfluenceStateHostile')) or Path(Context, @'./ClassEmpire/ClassSenate/LawP05L05Effect')</InterpreterPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionColonize"/>
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionHeroLocked"/>
    </EntityModifiers>
    <CancelActions Flags="CancelOnAnything,CancelOnGuard" SameContext="true" SameInitiator="false" SameNodeAndOnAllEmpires="true"/>
  </ColonizeFleetAction>-->

  <!--  Colonize as Vaulters Option A: Nobody is Guarding -->
  <SuperColonizeFleetAction Name="SuperColonizeFleetAction" FeedbackDuration="1.5" DelayAfterFeedback="1" PropertyToReset="TurnsSinceSuperColonization" InitialPopulation="1">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Prerequisite,Discard">ClassGarrisonFleet/ClassShip,ShipRoleSuperColonizer</PathPrerequisite>
      <InterpreterPrerequisite Flags="CannotColonizeUnderEnemyInfluence">not(Path(Context, @'FleetInfluenceStateHostile')) or Path(Context, @'./ClassEmpire/ClassSenate/LawP05L05Effect')</InterpreterPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionColonize"/>
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionHeroLocked"/>
    </EntityModifiers>
    <EntityPrerequisites Location="OrbitEntities">
      <PathPrerequisite Inverted="true" Flags="Prerequisite,Disable,SystemIsBeingBlockaded">GuardedGameNode</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="Prerequisite,Disable,SystemIsBeingBlockaded">BlockadedColonizedStarSystem</PathPrerequisite>
    </EntityPrerequisites>
    <CustomCost Instant="true" ResourceName="EmpireMoney">Property(Context,@'../ClassEmpire',SuperColonizationCost)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic1">Property(Context,@'../ClassEmpire',SuperColonizationCost) * Property(Context,@'../ClassEmpire',SuperColonizationStrategicCostFraction) / (Property(Context,@'../ClassEmpire',DustInflation)^0.33)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic2">Property(Context,@'../ClassEmpire',SuperColonizationCost) * Property(Context,@'../ClassEmpire',SuperColonizationStrategicCostFraction) / (Property(Context,@'../ClassEmpire',DustInflation)^0.33)</CustomCost>
    <CancelActions Flags="CancelOnAnything,CancelOnGuard" SameContext="true" SameInitiator="false" SameNodeAndOnAllEmpires="true"/>
    <TemporaryEffect Name="GoldenAge" DurationProperty="SuperColonizationGoldenAgeDuration"/>
  </SuperColonizeFleetAction>

  <!--  Colonize as Vaulters B: You are Guarding -->
  <!--<SuperColonizeFleetAction Name="SuperColonizeFleetAction2" FeedbackDuration="1.5" DelayAfterFeedback="1" PropertyToReset="TurnsSinceSuperColonization" InitialPopulation="1">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="SystemIsBeingBlockaded,Discard" Inverted="true">../ClassEmpire,FactionTraitBlockadeBreakers</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingBlockaded,Discard">ClassGarrisonFleet,FleetActionGuarding</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,Discard">ClassGarrisonFleet/ClassShip,ShipRoleSuperColonizer</PathPrerequisite>
      <InterpreterPrerequisite Flags="CannotColonizeUnderEnemyInfluence">not(Path(Context, @'FleetInfluenceStateHostile')) or Path(Context, @'./ClassEmpire/ClassSenate/LawP05L05Effect')</InterpreterPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionColonize"/>
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionHeroLocked"/>
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireMoney">Property(Context,@'../ClassEmpire',SuperColonizationCost)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic1">Property(Context,@'../ClassEmpire',SuperColonizationCost) * Property(Context,@'../ClassEmpire',SuperColonizationStrategicCostFraction) / Property(Context,@'../ClassEmpire',DustInflation)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic2">Property(Context,@'../ClassEmpire',SuperColonizationCost) * Property(Context,@'../ClassEmpire',SuperColonizationStrategicCostFraction) / Property(Context,@'../ClassEmpire',DustInflation)</CustomCost>
    <CancelActions Flags="CancelOnAnything,CancelOnGuard" SameContext="true" SameInitiator="false" SameNodeAndOnAllEmpires="true"/>
    <TemporaryEffect Name="GoldenAge" DurationProperty="SuperColonizationGoldenAgeDuration"/>
  </SuperColonizeFleetAction>-->

  <!--  Colonize as Vaulters C: Blockade Breaker -->
  <!--<SuperColonizeFleetAction Name="SuperColonizeFleetAction3" FeedbackDuration="1.5" DelayAfterFeedback="1" PropertyToReset="TurnsSinceSuperColonization" InitialPopulation="1">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingBlockaded,Discard">../ClassEmpire,FactionTraitBlockadeBreakers</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,Discard">ClassGarrisonFleet/ClassShip,ShipRoleSuperColonizer</PathPrerequisite>
      <InterpreterPrerequisite Flags="CannotColonizeUnderEnemyInfluence">not(Path(Context, @'FleetInfluenceStateHostile')) or Path(Context, @'./ClassEmpire/ClassSenate/LawP05L05Effect')</InterpreterPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionColonize"/>
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionHeroLocked"/>
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireMoney">Property(Context,@'../ClassEmpire',SuperColonizationCost)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic1">Property(Context,@'../ClassEmpire',SuperColonizationCost) * Property(Context,@'../ClassEmpire',SuperColonizationStrategicCostFraction) / Property(Context,@'../ClassEmpire',DustInflation)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic2">Property(Context,@'../ClassEmpire',SuperColonizationCost) * Property(Context,@'../ClassEmpire',SuperColonizationStrategicCostFraction) / Property(Context,@'../ClassEmpire',DustInflation)</CustomCost>
    <CancelActions Flags="CancelOnAnything,CancelOnGuard" SameContext="true" SameInitiator="false" SameNodeAndOnAllEmpires="true"/>
    <TemporaryEffect Name="GoldenAge" DurationProperty="SuperColonizationGoldenAgeDuration"/>
  </SuperColonizeFleetAction>-->

  <!-- Juggernaut Ion Wave -->
  <FireIonWaveFleetAction Name="FireIonWaveFleetAction" DamageRatio="1" Duration="3" Cooldown="15">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite                 Flags="Discard">ClassGarrisonFleet/ShipRoleBattleship</PathPrerequisite>

      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">FleetActionGroundBattle</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>

    <CustomCost Instant="true" ResourceName="Strategic3">Property(Context,@'ClassGarrison/ClassShip,ShipRoleBattleship',JuggernautShotCost)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic4">Property(Context,@'ClassGarrison/ClassShip,ShipRoleBattleship',JuggernautShotCost)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic5">Property(Context,@'ClassGarrison/ClassShip,ShipRoleBattleship',JuggernautShotCost)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic6">Property(Context,@'ClassGarrison/ClassShip,ShipRoleBattleship',JuggernautShotCost)</CustomCost>

    <TechnologyPrerequisite Flags="Prerequisite,Discard">TechnologyJuggernautBattleshipAbility</TechnologyPrerequisite>
    <DownloadableContentPrerequisite Flags="Discard">DLCHisshos</DownloadableContentPrerequisite>
    <BattleshipSimulationDescriptorReference Name="ShipWeaponsDeactivated"/>

  </FireIonWaveFleetAction>

  <!-- Behemoth Specializations -->
  <SpecializeJuggernautRetrofitShipAction Name="JuggernautSpecializationObliterator" ShipDesignName="Juggernauts_Obliterator" RequestedTurnsCount="2">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Discard">ShipRoleJuggernaut</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">../FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">../FleetActionGroundBattle</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="SpecializationInProgress">ShipActionSpecializing</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="ShipStateLockedInGarrison"/>
      <SimulationAlteration DescriptorReference="ShipActionSpecializing"/>
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireMoney">1600 * Pow(Property(Context, @'../ClassEmpire', DustInflation),0.33) * Property(Context, @'../ClassEmpire', ObliteratorConstructionCostMultiplier)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic1">50 * Property(Context, @'../ClassEmpire', ObliteratorConstructionCostMultiplier)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic2">50 * Property(Context, @'../ClassEmpire', ObliteratorConstructionCostMultiplier)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic3">50 * Property(Context, @'../ClassEmpire', ObliteratorConstructionCostMultiplier)</CustomCost>
    <CustomCost Instant="true" ResourceName="Strategic4">50 * Property(Context, @'../ClassEmpire', ObliteratorConstructionCostMultiplier)</CustomCost>
    <GameSettingPrerequisite Flags="Prerequisite,Discard,NoSuperWeaponsAllowed">AllowSuperWeapons,True</GameSettingPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Technology">TechnologyJuggernautObliteratorSpecialization</TechnologyPrerequisite>
    <SystemInterpreterPrerequisite Flags="RequiresSpaceport">Property(Context,SystemLevel) ge 2</SystemInterpreterPrerequisite>
  </SpecializeJuggernautRetrofitShipAction>
  <SpecializeJuggernautRetrofitShipAction Name="JuggernautSpecializationBattleship" ShipDesignName="Juggernauts_Battleship" RequestedTurnsCount="2">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Discard">ShipRoleJuggernaut</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">../FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">../FleetActionGroundBattle</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="SpecializationInProgress">ShipActionSpecializing</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="ShipStateLockedInGarrison"/>
      <SimulationAlteration DescriptorReference="ShipActionSpecializing"/>
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireMoney">1200 * Pow(Property(Context, @'../ClassEmpire', DustInflation),0.33)</CustomCost>
    <Cost Instant="true" ResourceName="Strategic1">15</Cost>
    <Cost Instant="true" ResourceName="Strategic2">15</Cost>
    <TechnologyPrerequisite Flags="Prerequisite,Technology">TechnologyJuggernautBattleshipSpecialization</TechnologyPrerequisite>
    <SystemInterpreterPrerequisite Flags="RequiresSpaceport">Property(Context,SystemLevel) ge 2</SystemInterpreterPrerequisite>
  </SpecializeJuggernautRetrofitShipAction>
  <SpecializeJuggernautCitadelShipAction Name="JuggernautSpecializationCitadel" RequestedTurnsCount="2" SilentRecovery="true" CitadelDefinitionName="Citadel1">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Discard">ShipRoleJuggernaut</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="EncounterInProgress">../FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="FleetIsBusy">../FleetActionGroundBattle</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="SpecializationInProgress">ShipActionSpecializing</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="ShipStateLockedInGarrison"/>
      <SimulationAlteration DescriptorReference="ShipActionSpecializing"/>
      <SimulationAlteration DescriptorReference="ShipActionSpecializingCitadel"/>
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireMoney">800 * Pow(Property(Context, @'../ClassEmpire', DustInflation),0.33)</CustomCost>
    <Cost Instant="true" ResourceName="Strategic1">30</Cost>
    <Cost Instant="true" ResourceName="Strategic2">30</Cost>
    <Cost Instant="true" ResourceName="EmpireManpower">600</Cost>
    <TechnologyPrerequisite Flags="Prerequisite,Technology">TechnologyJuggernautCitadelSpecialization</TechnologyPrerequisite>
    <SystemInterpreterPrerequisite Flags="RequiresSpaceport">Property(Context,SystemLevel) ge 2</SystemInterpreterPrerequisite>
    <SystemPathPrerequisite Flags="AlreadyHasACitadel" Inverted="true">ClassColonizedStarSystem/ClassCitadel</SystemPathPrerequisite>
    <SystemPathPrerequisite Flags="AlreadyHasACitadel" Inverted="true">ClassColonizedStarSystem/ClassGarrison/ClassShip,ShipActionSpecializingCitadel</SystemPathPrerequisite>
  </SpecializeJuggernautCitadelShipAction>

  <!-- Cloaking -->
  <InvisibilityFleetAction Name="InvisibilityFleetAction">
    <EntityPrerequisites Location="Self">
      <InterpreterPrerequisite Flags="Prerequisite,Discard,CheckedOnFleetSpawn,CheckedOnFleetModification">Property(Context,AntiVisionStrengthForModule) ge 1</InterpreterPrerequisite>
      <PathPrerequisite Inverted="true"  Flags="MotherShipAttached">FleetActionMothershipAttached</PathPrerequisite>
      <PathPrerequisite Inverted="true"  Flags="Prerequisite,ActionInProgress,CheckedOnFleetSpawn">InvisibilityFleetAction</PathPrerequisite>
      <PathPrerequisite Inverted="true"  Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
      <PathPrerequisite Inverted="true"  Flags="FleetIsBusy">FleetActionLogistics</PathPrerequisite>
      <PathPrerequisite Inverted="true"  Flags="FleetIsBusy">FleetActionRooting</PathPrerequisite>
      <PathPrerequisite Inverted="true"  Flags="IsCollectingRelics">FleetActionCollectingRelics</PathPrerequisite>
      <PathPrerequisite Inverted="true"  Flags="Prerequisite,CannotCloakPlanetCracker,CheckedOnFleetModification">ClassGarrisonFleet//ClassModuleDestruction</PathPrerequisite>
    </EntityPrerequisites>

    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="InvisibilityFleetAction"/>
    </EntityModifiers>

    <!-- Suspendable descriptors are removed on attack, and restored afterwards -->
    <SuspendableDescriptor Name="InvisibilityFleetActionAddAntivision"/>

  </InvisibilityFleetAction>

  <!-- Nakalim Collect Relics -->
  <CollectRelicsFleetAction Name="CollectRelicsFleetAction" Flags="CancelOnMovement" Duration="3">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Discard,MustBeTemplar" Inverted="false">../ClassEmpire,AffinityTemplars</PathPrerequisite>
    </EntityPrerequisites>

    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionCollectingRelics"/>
    </EntityModifiers>

    <EntityModifiers Filter="SameEmpire" Location="OrbitEntities">
      <SimulationAlteration DescriptorReference="OwnFleetCollectingRelics"/>
    </EntityModifiers>

    <CancelActions Flags="CancelOnAnything" SameContext="false" SameInitiator="true"/>

  </CollectRelicsFleetAction>

  <!-- Privateering -->
  <PrivateerFleetAction Name="PrivateerFleetAction">

    <!-- Prerequisites with Flag 'CheckOnFleetCreation' are checked when ships from a privateers fleet are moved to a new fleet. -->
    <EntityPrerequisites Location="Self">
      <!-- Hide when the fleet contains no mercenary -->
      <PathPrerequisite Inverted="false" Flags="Prerequisite,Discard,CheckOnFleetCreation">ClassGarrisonFleet/ClassShip,MercenaryShip</PathPrerequisite>
      <!-- Disable when the fleet has a hero -->
      <PathPrerequisite Inverted="true" Flags="Prerequisite,NoHeroesForPrivateers,CheckOnFleetCreation">ClassGarrisonFleet/ClassHero</PathPrerequisite>
      <!-- Disable when the fleet doesn't contain 100% mercenaries or contains a civilian ship -->
      <PathPrerequisite Inverted="true" Flags="Prerequisite,NotAllShipsAreMercenaries,CheckOnFleetCreation">ClassGarrisonFleet/ClassShip,!MercenaryShip</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="Prerequisite,CivilianShipsCannotCamouflage,CheckOnFleetCreation">ClassGarrisonFleet/ClassShip,ShipRoleColonizer</PathPrerequisite>
      <!-- Disable when not in owner influence -->
      <PathPrerequisite Inverted="false" Flags="Prerequisite,FleetNotInFriendlyOrbit">FleetInfluenceStateOwner</PathPrerequisite>
    </EntityPrerequisites>

    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionPrivateer" />
      <SimulationAlteration DescriptorReference="FleetActionPrivateerUpkeep" />
    </EntityModifiers>

    <PathPrerequisite Flags="Discard" Inverted="true">../ClassEmpire,FactionTraitCorsairs</PathPrerequisite>
    <PathPrerequisite Flags="Discard" Inverted="true">../ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Technology,Discard" UnlockHidden="true">TechnologyPrivateers</TechnologyPrerequisite>
  </PrivateerFleetAction>

  <PrivateerFleetAction Name="PrivateerQuestFleetAction">

    <!-- Prerequisites with Flag 'CheckOnFleetCreation' are checked when ships from a privateers fleet are moved to a new fleet. -->
    <EntityPrerequisites Location="Self">
      <!-- Hide when the fleet contains no mercenary -->
      <PathPrerequisite Inverted="false" Flags="Prerequisite,Discard,CheckOnFleetCreation">ClassGarrisonFleet/ClassShip,CanPrivateer</PathPrerequisite>
      <!-- Disable when the fleet has a hero -->
      <PathPrerequisite Inverted="true" Flags="Prerequisite,NoHeroesForPrivateers,CheckOnFleetCreation">ClassGarrisonFleet/ClassHero</PathPrerequisite>
      <!-- Disable when the fleet doesn't contain 100% mercenaries or contains a civilian ship -->
      <PathPrerequisite Inverted="true" Flags="Prerequisite,NotAllShipsAreMercenaries,CheckOnFleetCreation">ClassGarrisonFleet/ClassShip,!CanPrivateer</PathPrerequisite>
      <PathPrerequisite Inverted="true" Flags="Prerequisite,CivilianShipsCannotCamouflage,CheckOnFleetCreation">ClassGarrisonFleet/ClassShip,ShipRoleColonizer</PathPrerequisite>
      <!-- Disable when not in owner influence -->
      <PathPrerequisite Inverted="false" Flags="Prerequisite,FleetNotInFriendlyOrbit">FleetInfluenceStateOwner</PathPrerequisite>
    </EntityPrerequisites>

    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionPrivateer" />
      <SimulationAlteration DescriptorReference="FleetActionPrivateerUpkeep" />
    </EntityModifiers>

    <PathPrerequisite Flags="Discard" Inverted="true">../ClassEmpire,FactionTraitCorsairs</PathPrerequisite>
    <PathPrerequisite Flags="Discard" Inverted="true">../ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
    <TechnologyPrerequisite Flags="Prerequisite,Technology,Discard" UnlockHidden="true">TechnologyPrivateers</TechnologyPrerequisite>
  </PrivateerFleetAction>

  <!--  Double growth on outpost  -->
  <OutpostActionDefinition Name="OutpostActionBoostGrowthWithDust" Duration="10">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingGuarded" Inverted="true">BlockadedColonizedStarSystem</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingDecolonized" Inverted="true">DecolonizedColonizedStarSystem</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite" Inverted="true">OutpostActionIncreaseLocalGrowthEffect</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="OutpostActionIncreaseLocalGrowthEffect" />
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireMoney">50 + 25 * (Property(StockLocation, @../ClassEmpire, SystemCount) + 4)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">../ClassEmpire/PopulationMajor,ClassPopulationEmpireAffinityTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">../ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
  </OutpostActionDefinition>

  <!--  Add flat growth on outpost (Lumeris) -->
  <OutpostActionDefinition Name="OutpostActionIncreaseMigrationRateVenetians" Duration="10">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingGuarded" Inverted="true">BlockadedColonizedStarSystem</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingDecolonized" Inverted="true">DecolonizedColonizedStarSystem</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite" Inverted="true">OutpostActionIncreaseMigrationRateVenetians</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="OutpostActionIncreaseMigrationRateVenetiansEffect"/>
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireEmpirePoint">20 + 20 * (Property(StockLocation, @../ClassEmpire, SystemCount) - 1)</CustomCost>
    <PathPrerequisite Inverted="false" Flags="Prerequisite,Discard,Faction,AffinityGameplayVenetians">../ClassEmpire,AffinityGameplayVenetians</PathPrerequisite>
  </OutpostActionDefinition>

  <!--  Remove Lumeris from regular outpost boosting action -->
  <OutpostActionDefinition Name="OutpostActionIncreaseMigrationRate" Duration="10" RequiresMigrationFlux="true">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingGuarded" Inverted="true">BlockadedColonizedStarSystem</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingDecolonized" Inverted="true">DecolonizedColonizedStarSystem</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite" Inverted="true">OutpostActionIncreaseMigrationRate</PathPrerequisite>
    </EntityPrerequisites>
    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="OutpostActionIncreaseMigrationRate"/>
    </EntityModifiers>
    <CustomCost Instant="true" ResourceName="EmpireEmpirePoint">20 + 20 * (Property(StockLocation, @../ClassEmpire, SystemCount) - 1)</CustomCost>
    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">../ClassEmpire/PopulationMajor,ClassPopulationEmpireAffinityTimeLords</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">../ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">../ClassEmpire,AffinityGameplayVenetians</PathPrerequisite>
    <PathPrerequisite Inverted="true" Flags="Prerequisite,Discard,Faction,AffinityGameplayVenetians">../ClassEmpire,AffinityGameplayVenetians</PathPrerequisite>
    <MigrationFluxSimulationDescriptorReference Name="OutpostActionIncreaseMigrationRateEffect"/>
  </OutpostActionDefinition>

  <!-- Vampirilis Brainwash -->
  <CreateAllianceEmpireAction Name="CreateAllianceEmpireAction" ResultingDiplomaticRelationState="DiplomaticRelationStateMinorAdvancedBrainwashed">
    <CustomCost ResourceName="EmpireEmpirePoint" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * 200 * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Max(Property(StockLocation,@ClassEmpire,SystemCount), 1)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard" >ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>
    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationInterpreterPrerequisite Flags="Prerequisite,Discard">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) ge 100 </RelationInterpreterPrerequisite>

    <MinorEmpireInterpreterPrerequisite Flags="OwnershipType">$(OwnershipType) lt 2 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <PopulationEventOnSelf>PopulationPoliticalEventMinorBrainWash</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpirePeaceDeclared</ScoreProviderEventOnSelf>
  </CreateAllianceEmpireAction>

  <!-- Vampirilis Forced Brainwash (to enable assimilation of traits by force) -->
  <CreateAllianceEmpireAction Name="ForceAllianceEmpireAction" ResultingDiplomaticRelationState="DiplomaticRelationStateMinorAdvancedBrainwashed">
    <CustomCost ResourceName="EmpireEmpirePoint" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * 10 * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard" >ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
    <StatePrerequisite Inverted="false" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationPathPrerequisite Inverted="false" Flags="IsNotLeeched">ClassMinorRelationWithMajor,MinorRelationLeeched</RelationPathPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="RemainingManpower">Property(Context, @'ClassEmpire/ClassColonizedStarSystem,MinorHomeSystem',SystemManpowerStock,true) lt 1</MinorEmpireInterpreterPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorBrainWash</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpirePeaceDeclared</ScoreProviderEventOnSelf>
  </CreateAllianceEmpireAction>

  <!-- Assimilate -->
  <AssimilateEmpireAction Name="AssimilateEmpireAction">
    <CustomCost ResourceName="EmpireEmpirePoint" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * 200 * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Max(Property(StockLocation,@ClassEmpire,SystemCount), 1)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">ClassEmpire,AffinityGameplayVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">ClassEmpire,AffinityGameplayUmbralChoir</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>
    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationInterpreterPrerequisite Flags="Prerequisite,Discard">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) ge 100</RelationInterpreterPrerequisite>
    <RelationInterpreterPrerequisite Flags="Prerequisite,SystemIsBeingBlockaded">Property(Context, @'ClassMinorRelationWithMajor', MinorBlockaded, true) lt 1</RelationInterpreterPrerequisite>

    <MinorEmpireInterpreterPrerequisite Flags="OwnershipType">$(OwnershipType) lt 2 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <PopulationEventOnSelf>PopulationPoliticalEventMinorEmpireAssimilated</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpireAssimilated</ScoreProviderEventOnSelf>
  </AssimilateEmpireAction>

  <AssimilateEmpireAction Name="AssimilateUnfallenEmpireAction">
    <CustomCost ResourceName="EmpireEmpirePoint" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * 200 * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Max(Property(StockLocation,@ClassEmpire,SystemCount), 1)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>
    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationInterpreterPrerequisite Flags="Prerequisite,Discard">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) ge 100 </RelationInterpreterPrerequisite>
    <RelationInterpreterPrerequisite Flags="Prerequisite,NotConnectedToRootNetwork">Path(Context,@'ClassMinorRelationWithMajor,MinorRelationUnderInfluence')</RelationInterpreterPrerequisite>
    <RelationInterpreterPrerequisite Flags="Prerequisite,SystemIsBeingBlockaded">Property(Context, @'ClassMinorRelationWithMajor', MinorBlockaded, true) lt 1</RelationInterpreterPrerequisite>

    <MinorEmpireInterpreterPrerequisite Flags="OwnershipType">$(OwnershipType) lt 2 or $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <PopulationEventOnSelf>PopulationPoliticalEventMinorEmpireAssimilated</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpireAssimilated</ScoreProviderEventOnSelf>
  </AssimilateEmpireAction>

  <!-- Minor empire actions. -->
  <GhostifyEmpireAction Name="GhostifyEmpireAction" HidePanelOnClick="true">
    <CustomCost ResourceName="EmpireEmpirePoint" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * 200 * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Property(StockLocation,@ClassEmpire,SystemCount)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Disable,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>

    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Disable,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationInterpreterPrerequisite Flags="Prerequisite,Discard">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) ge 100</RelationInterpreterPrerequisite>
    <RelationInterpreterPrerequisite Flags="Prerequisite,SystemIsBeingBlockaded">Property(Context, @'ClassMinorRelationWithMajor', MinorBlockaded, true) lt 1</RelationInterpreterPrerequisite>

    <MinorEmpireInterpreterPrerequisite Flags="Disable,OwnershipType">$(OwnershipType) lt 2 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <PopulationEventOnSelf>PopulationPoliticalEventMinorEmpirePurge</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpireAssimilated</ScoreProviderEventOnSelf>
  </GhostifyEmpireAction>

  <GhostifyEmpireAction Name="GhostifyEmpireActionViaQuest" HidePanelOnClick="true">
    <InterpreterPrerequisite Flags="PrerequisiteWhichCanOnlyFailExceptIfStartedViaTheQuestsSpecialOrder">false</InterpreterPrerequisite>
  </GhostifyEmpireAction>

  <!--Fleet spawning minor-->
  <EmpireDiplomaticGivePopulationAsShipAction Name="EmpireDiplomaticGivePopulationAsShipAction" HidePanelOnClick="true" PopulationCount="5" FleetCount="1">
    <MinorLuxuryCost Instant="true">75 * Property(StockLocation,@ClassEmpire,DiplomacyCostReduction)</MinorLuxuryCost>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <RelationPathPrerequisite Inverted="false" Flags="Prerequisite,Discard">ClassMinorRelationWithMajor,RelationIdeologyMinorWarmonger</RelationPathPrerequisite>

    <MinorEmpireInterpreterPrerequisite Flags="Prerequisite,RequiredBestRelation">$(OwnershipType) ge 1 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="NoPopulationOnSystem">Property(Context, @'ClassEmpire/ClassColonizedStarSystem,MinorHomeSystem',Population,true) gt 5</MinorEmpireInterpreterPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorRecruitShips</PopulationEventOnSelf>
  </EmpireDiplomaticGivePopulationAsShipAction>

  <!--Selective Migration (Disabled due to being unfixably bugged)-->
  <EmpireDiplomaticMigrationAction Name="EmpireDiplomaticMigrationAction" HidePanelOnClick="true" PopulationCount="1">
    <PathPrerequisite Flags="Prerequisite,Discard">ClassEmpire,!AffinityVampirilis</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,Discard">ClassEmpire,AffinityVampirilis</PathPrerequisite>
    <InterpreterPrerequisite Flags="NoValidDestination">(SumProperty(Context, @'ClassEmpire/ClassColonizedStarSystem',MaximumPopulation) - Property(Context,@ClassEmpire,Population)) gt 0</InterpreterPrerequisite>
    <MinorLuxuryCost Instant="true">15 * Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction)</MinorLuxuryCost>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <RelationPathPrerequisite Inverted="false" Flags="Prerequisite,Discard">ClassMinorRelationWithMajor,RelationIdeologyMinorPacifist</RelationPathPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="Prerequisite,RequiredBestRelation">$(OwnershipType) ge 1 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="NoPopulationOnSystem">Property(Context, @'ClassEmpire/ClassColonizedStarSystem,MinorHomeSystem',Population,true) gt 1</MinorEmpireInterpreterPrerequisite>
    <PopulationEventOnSelf>PopulationPoliticalEventMinorMigrationAction</PopulationEventOnSelf>
  </EmpireDiplomaticMigrationAction>

  <!--Manpower-->
  <EmpireDiplomacyGiveResourcesAction Name="EmpireDiplomaticManpowerAction" PopulationToDestroyCount="1">
    <PathPrerequisite Flags="Prerequisite,Discard">ClassEmpire,!AffinityVampirilis</PathPrerequisite>
    <InterpreterPrerequisite Flags="Disable,ManpowerMaxed">Property(Context,@ClassEmpire,EmpireManpowerStock) lt Property(Context,@ClassEmpire,MaximumEmpireManpowerStock)</InterpreterPrerequisite>
    <MinorLuxuryCost Instant="true">15 * Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction)</MinorLuxuryCost>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <RelationPathPrerequisite Inverted="false" Flags="Prerequisite,Discard">ClassMinorRelationWithMajor,RelationIdeologyMinorPacifist</RelationPathPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="Prerequisite,RequiredBestRelation">$(OwnershipType) ge 1 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="NoPopulationOnSystem">Property(Context, @'ClassEmpire/ClassColonizedStarSystem,MinorHomeSystem',Population,true) gt 1</MinorEmpireInterpreterPrerequisite>
    <PopulationEventOnSelf>PopulationPoliticalEventMinorManpower</PopulationEventOnSelf>
    <ResourceReward ResourceName="EmpireManpower">300</ResourceReward>
    </EmpireDiplomacyGiveResourcesAction>

  <!-- Praise -->
  <EmpireDiplomaticActionDynamicCost Name="ComplimentEmpireAction">
    <CustomCost ResourceName="EmpireEmpirePoint" Instant="true">((20 + Max(0, $(Trend)) * 60) * Property(Relation,MinorPraiseCostMultiplier) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Property(StockLocation,@ClassEmpire,DiplomacyCostReduction)) * Property(StockLocation,@ClassEmpire,MinorFactionCostReduction) * Property(Context,@'../ClassEmpire',GameSpeedMultiplier)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">ClassEmpire,AffinityGameplayVenetians</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>
    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationInterpreterPrerequisite Flags="Prerequisite,Discard">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) lt 100 </RelationInterpreterPrerequisite>
    <RelationPathPrerequisite Inverted="true" Flags="IsLeeched">ClassMinorRelationWithMajor,MinorRelationLeeched</RelationPathPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorEmpirePraised</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpireBribed</ScoreProviderEventOnSelf>
    <TemporaryEffect>MinorRelationWithMajorPraise</TemporaryEffect>
  </EmpireDiplomaticActionDynamicCost>

  <!-- Lumeris Bribe -->
  <EmpireDiplomaticActionDynamicCost Name="BribeEmpireAction">
    <CustomCost ResourceName="EmpireMoney" Instant="true">((50 + Max(0, $(Trend)) * 100) * Property(Relation,MinorPraiseCostMultiplier) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Property(StockLocation,@ClassEmpire,DiplomacyCostReduction)) * Property(StockLocation,@ClassEmpire,MinorFactionCostReduction) * Property(Context,@'../ClassEmpire',GameSpeedMultiplier)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard" >ClassEmpire,AffinityGameplayVenetians</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,Politics06</PathPrerequisite>
    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>

    <RelationInterpreterPrerequisite Flags="Prerequisite,Discard">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) lt 100 </RelationInterpreterPrerequisite>
    <RelationPathPrerequisite Inverted="true" Flags="IsLeeched">ClassMinorRelationWithMajor,MinorRelationLeeched</RelationPathPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorEmpireBribed</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpireBribed</ScoreProviderEventOnSelf>

    <TemporaryEffect>MinorRelationWithMajorBribe</TemporaryEffect>
  </EmpireDiplomaticActionDynamicCost>

  <OutpostActionFinishDefinition Name="OutpostActionFinishHisshos" Duration="0">
    <EntityPrerequisites Location="Self">
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingGuarded" Inverted="true">BlockadedColonizedStarSystem</PathPrerequisite>
      <PathPrerequisite Flags="Prerequisite,SystemIsBeingDecolonized" Inverted="true">DecolonizedColonizedStarSystem</PathPrerequisite>
      
    </EntityPrerequisites>

    <CustomCost Instant="true" ResourceName="EmpireHonor">Min(Max(Exp(4.4 - (Property(Context,@'ClassStarSystem',SystemGrowthStock) / (100 * Property(Context,@'../ClassEmpire',GameSpeedMultiplier)))), 10 + Max(5 * (Property(Context,@'../ClassEmpire',ColonizedStarSystemStateColonyCount) - Property(Context,@'../ClassEmpire',OverColonizationThreshold)), 0)), 75)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard">../ClassEmpire,AffinityGameplayMajorHisshos</PathPrerequisite>
  </OutpostActionFinishDefinition>

  <!--  War  -->
  <EmpireDiplomaticAction Name="StartWarEmpireAction" ResultingDiplomaticRelationState="DiplomaticRelationStateMinorAdvancedWar" RefreshRelationPoint="true">
    <CustomCost ResourceName="EmpireEmpirePoint" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * (2 * Property(Relation,RelationPoint)) * Property(StockLocation,@ClassEmpire,FreeWarDeclaration) * Property(StockLocation,@ClassEmpire,AggressiveTreatyCostReduction)</CustomCost>
    <CancelActions Flags="CancelOnWar" SameContext="true" SameInitiator="true" SameNodeAndOnAllEmpires="false"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>
    <PopulationEventOnSelf>PopulationPoliticalEventMinorWarDeclared</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpireWarDeclared</ScoreProviderEventOnSelf>
  </EmpireDiplomaticAction>

  <!-- Diplomacy -->
  <!-- DEPRECATED DONT DELETE -->
  <!-- Sophon Quest Bribe -->
  <EmpireDiplomaticActionDynamicCost Name="BribeEmpireActionLuxury01">
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>
    <PathPrerequisite  Flags="Prerequisite,Discard">ClassEmpire,EmpireImprovementQuestSophons40</PathPrerequisite>

    <MinorLuxuryCost Instant="true">Max(3,(Max(0, $(Trend)) * 1 * Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction)))</MinorLuxuryCost>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorAdvancedBrainwashed"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationInterpreterPrerequisite Flags="Prerequisite,Discard">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) lt 100 </RelationInterpreterPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorEmpireBribed</PopulationEventOnSelf>
    <ScoreProviderEventOnSelf>MinorEmpireBribed</ScoreProviderEventOnSelf>

    <TemporaryEffect>MinorRelationWithMajorPraise</TemporaryEffect>
  </EmpireDiplomaticActionDynamicCost>

  <!-- Quest -->
  <AskForMinorQuestEmpireActionDefinition Name="AskForMinorQuestEmpireAction">
    <CustomCost ResourceName="EmpireMoney" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * 35 * Property(Relation,MinorQuestCostMultiplier) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Property(StockLocation,@ClassEmpire,SystemCount)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard" Inverted="true">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>
    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>
    <RelationInterpreterPrerequisite   Flags="Prerequisite,MustBeFriendlyRelation">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) ge 75</RelationInterpreterPrerequisite>
    <RelationInterpreterPrerequisite Flags="Prerequisite,SystemIsBeingBlockaded">Property(Context, @'ClassMinorRelationWithMajor', MinorBlockaded, true) lt 1</RelationInterpreterPrerequisite>

    <MinorEmpireInterpreterPrerequisite Inverted="true" Flags="Discard">$(OwnershipType) eq 2 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="OwnershipType">$(OwnershipType) lt 2 or $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorQuestEmpireAction</PopulationEventOnSelf>
  </AskForMinorQuestEmpireActionDefinition>

  <!-- Quest -->
  <AskForMinorQuestEmpireActionDefinition Name="AskForMinorQuestUnfallenEmpireAction">
    <CustomCost ResourceName="EmpireMoney" Instant="true">Property(StockLocation,@ClassEmpire,DiplomacyCostReduction) * 35 * Property(Relation,MinorQuestCostMultiplier) * Property(StockLocation,@ClassEmpire,PeacefulTreatyCostReduction) * Property(StockLocation,@ClassEmpire,SystemCount)</CustomCost>

    <PathPrerequisite Flags="Prerequisite,Discard">ClassEmpire,AffinityGameplayUnfallen</PathPrerequisite>
    <PathPrerequisite Flags="Prerequisite,FactionTraitEternalWar" Inverted="true">ClassEmpire,FactionTraitEternalWar/ClassSenate/ClassSenator,!Politics03</PathPrerequisite>
    <TechnologyPrerequisite Flags="Technology" UnlockHidden="true">TechnologyMinorFactionsGameplay</TechnologyPrerequisite>

    <StatePrerequisite Inverted="true" Flags="Prerequisite,Discard" Hidden="true" State="DiplomaticRelationStateMinorUnknown"/>
    <StatePrerequisite Inverted="true" Flags="Prerequisite,CannotDoThisWhenAtWar" Hidden="true" State="DiplomaticRelationStateMinorAdvancedWar"/>

    <RelationInterpreterPrerequisite   Flags="Prerequisite,MustBeFriendlyRelation">Property(Context, @'ClassMinorRelationWithMajor', RelationPoint, true) ge 75</RelationInterpreterPrerequisite>
    <RelationInterpreterPrerequisite Flags="Prerequisite,NotConnectedToRootNetwork">Path(Context,@'ClassMinorRelationWithMajor,MinorRelationUnderInfluence')</RelationInterpreterPrerequisite>
    <RelationInterpreterPrerequisite Flags="Prerequisite,SystemIsBeingBlockaded">Property(Context, @'ClassMinorRelationWithMajor', MinorBlockaded, true) lt 1</RelationInterpreterPrerequisite>
    
    <MinorEmpireInterpreterPrerequisite Inverted="true" Flags="Discard">$(OwnershipType) eq 2 and $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>
    <MinorEmpireInterpreterPrerequisite Flags="OwnershipType">$(OwnershipType) lt 2 or $(IsOwner) eq 1</MinorEmpireInterpreterPrerequisite>

    <PopulationEventOnSelf>PopulationPoliticalEventMinorQuestEmpireAction</PopulationEventOnSelf>
  </AskForMinorQuestEmpireActionDefinition>

  <!-- Create Mobile Portal -->
  <CreatePortalFleetAction Name="CreatePortalFleetAction" Flags="CancelOnMovement,CancelOnRetreat">

    <EntityPrerequisites Location="Self">
      <!--<PathPrerequisite               Flags="Discard">ClassGarrisonFleet/ClassShip,ShipRoleSuperColonizer</PathPrerequisite>-->
      <InterpreterPrerequisite        Flags="Prerequisite,Discard">
        (Path(Context, @'ClassGarrisonFleet/ClassShip,ShipRoleSuperColonizer') and Path(Context, @'../ClassEmpire,EmpireImprovementVaultersArgosyEnhancement'))
        or  Path(Context, @'ClassGarrisonFleet/ClassShip,ShipRoleJuggernaut/ClassSection/ClassModule,ModuleSupportJuggernautVaulters')
      </InterpreterPrerequisite>
      <!--<PathPrerequisite Flags="Prerequisite,Discard">../ClassEmpire,EmpireImprovementUnique11SuperColonizer</PathPrerequisite>-->
      <PathPrerequisite   Inverted="true" Flags="UnderEnemyInfluence">ClassGarrisonFleet,FleetInfluenceStateHostile</PathPrerequisite>
      <PathPrerequisite   Inverted="true" Flags="EncounterInProgress">FleetActionAttack</PathPrerequisite>
    </EntityPrerequisites>

    <EntityModifiers Location="Self">
      <SimulationAlteration DescriptorReference="FleetActionBusy"/>
      <SimulationAlteration DescriptorReference="FleetActionCreatingPortal"/>
    </EntityModifiers>

    <CancelActions Flags="CancelOnAnything" SameContext="false" SameInitiator="true"/>

  </CreatePortalFleetAction>
</Datatable>